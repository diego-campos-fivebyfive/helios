<table class="table">
    <thead>
    <tr>
        <td colspan="3">

            {% if form is defined %}

            {{ form_start(form,{attr:{id:'form_configure', action: path('project_components',{id:project.id })}}) }}

            <div class="row">
                <div class="form-group">
                    <div class="col-md-4">
                        {{ form_label(form.power, 'Potência') }}
                        <div class="input-group">
                            <label class="input-group-addon">
                                <input type="radio" name="option"> Consumo
                            </label>
                            <label class="input-group-addon">
                                <input type="radio" name=option> Potência
                            </label>
                            {{ form_widget(form.power,{attr:{class:'form-control'}}) }}
                        </div>
                    </div>
                    <div class="col-md-4">
                        {{ form_label(form.module, 'Módulo') }}
                        {{ form_widget(form.module,{attr:{class:'form-control'}}) }}
                    </div>
                    <div class="col-md-4">
                        {{ form_label(form.inverter_maker, 'Fabricante do Inversor') }}
                        {{ form_widget(form.inverter_maker,{attr:{class:'form-control'}}) }}
                    </div>
                </div>
            </div>

            <div class="row" style="margin-top: 1rem;">
                <div class="form-group">
                    <div class="col-md-3">
                        {{ form_label(form.string_box_maker, 'Fabricante do String Box') }}
                        {{ form_widget(form.string_box_maker,{attr:{class:'form-control'}}) }}
                    </div>
                    <div class="col-md-3">
                        {{ form_label(form.roof_type, 'Tipo de Telhado') }}
                        {{ form_widget(form.roof_type,{attr:{class:'form-control'}}) }}
                    </div>
                    <div class="col-md-3">
                        {{ form_label(form.structure_maker, 'Fabricante da Estrutura') }}
                        {{ form_widget(form.structure_maker,{attr:{class:'form-control'}}) }}
                    </div>

                    <div class="hide">
                        {{ form_rest(form) }}
                    </div>

                    <div class="col-md-3">
                        <label> &nbsp; </label>
                        <button type="submit" class="btn btn-success btn-block ladda-button" data-style="zoom-in">
                            <i class="fa fa-check"></i> Recalcular
                        </button>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="hr-line-dashed"></div>
            </div>

            {{ form_end(form) }}

            {% endif %}

        </td>
    </tr>
    <tr>
        <th> Código</th>
        <th> Descrição</th>
        <th> Quantidade</th>
    </tr>
    </thead>
    <tbody>

    {# MODULES #}
    {% for projectModule in project.projectModules %}
        <tr>
            <td> {{ projectModule.module.id }} </td>
            <td> {{ projectModule.module.model }} </td>
            <td> {{ projectModule.quantity }} </td>
        </tr>
    {% endfor %}

    {# INVERTERS #}
    {% for projectInverter in project.projectInverters %}
        <tr>
            <td> {{ projectInverter.inverter.id }} </td>
            <td> {{ projectInverter.inverter.model }} </td>
            <td> {{ projectInverter.quantity }} </td>
        </tr>
    {% endfor %}

    {# STRING_BOXES #}
    {% for projectStringBox in project.projectStringBoxes %}
        <tr>
            <td> {{ projectStringBox.stringBox.code }} </td>
            <td> {{ projectStringBox.stringBox.description }} </td>
            <td> {{ projectStringBox.quantity }} </td>
        </tr>
    {% endfor %}

    {# STRUCTURES #}
    {% for projectStructure in project.projectStructures %}
        <tr>
            <td> {{ projectStructure.structure.code }} </td>
            <td> {{ projectStructure.structure.description }} </td>
            <td> {{ projectStructure.quantity }} </td>
        </tr>
    {% endfor %}


    {# VARIETIES #}
    {% for projectVariety in project.projectVarieties %}
        <tr>
            <td> {{ projectVariety.variety.code }} </td>
            <td> {{ projectVariety.variety.description }} </td>
            <td> {{ projectVariety.quantity }} </td>
        </tr>
    {% endfor %}

    </tbody>
</table>

<script>
    var form_config = $('#form_configure');
    var button_config = form_config.find('button');
    button_config.ladda();
    form_config.on('submit', function(event){
        event.preventDefault();
        button_config.ladda('start');
        ProjectManager.submit($(this), function(xhr){
            button_config.ladda('stop');
            ProjectManager.project = xhr.responseJSON.project;
            ProjectManager.onSaveProject();
        });
    })
</script>