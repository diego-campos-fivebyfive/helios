
<table class="table">
    <thead>
        <tr>
            <th class="col-md-1"> Tipo </th>
            <th> Descrição </th>
            <th class="col-md-2"> Custo Unitário </th>
            <th class="col-md-2"> Preço Unitário </th>
            <th class="col-md-1"> Quantidade </th>
            <th> Total </th>
            <th class="col-md-1"> &nbsp; </th>
        </tr>
    </thead>
    <tbody>
        {% for projectExtra in project.projectExtras %}

            <tr>
                <td>
                    <span class="label label-{{ projectExtra.extra.isProduct ? 'info' : 'success' }}" style="width: 100%;">
                        {{ projectExtra.extra.isProduct ? 'Produto' : 'Serviço' }}
                    </span>
                </td>
                <td> {{ projectExtra.extra.description }} </td>
                <td> {{ projectExtra.unitCostPrice|currency }} </td>
                <td> {{ projectExtra.unitSalePrice|currency }} </td>
                <td> {{ projectExtra.quantity }} </td>
                <td> {{ projectExtra.totalSalePrice|currency }} </td>
                <td class="btn-group btn-group-justified">
                    <a data-update="{{ path('financial_extras_update', {id:projectExtra.id}) }}" class="btn btn-success">
                        <i class="fa fa-pencil"></i>
                    </a>
                    <a data-delete="{{ path('financial_extras_delete', {id:projectExtra.id}) }}" class="btn btn-danger">
                        <i class="fa fa-trash"></i>
                    </a>
                </td>
            </tr>

        {% endfor %}
    </tbody>
    <tfoot>
        <tr>
            <td></td>
            <th colspan="4" class="text-right"> Total </th>
            <th> {{ project.salePriceExtras|currency }} </th>
        </tr>
    </tfoot>
</table>

<script>
    $('[data-update]').on('click', function(){
        Financial.get_extra_form($(this).data('update'));
    });

    $('[data-delete]').on('click', function(){
        var url = $(this).data('delete');
        swal({title: '{{ 'confirm.exclusion'|trans }}',
            text: '',
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            confirmButtonText: '{{ 'Confirmar'|trans }}',
            cancelButtonText: '{{ 'Cancelar'|trans }}',
            closeOnConfirm: false
        }, function() {
            $.ajax({
                url: url,
                method: 'post',
                data: {_method: 'delete'},
                success: function () {
                    Financial.onSaveExtra();
                    swal.close();
                },
                beforeSend: function(){
                    sweetAlert({
                        title: "Excluindo...",
                        text:  "Aguarde!",
                        type: "info",
                        showConfirmButton: false
                    });
                }
            });
        });
    });

</script>