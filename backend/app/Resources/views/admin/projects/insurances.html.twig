{% for insurance in insurances %}
    {% set hasAdditive = project.hasAdditive(insurance) %}

    <div class="row">
        <div class="form-group col-md-8">
            <label style="font-size: small; text-align: justify; font-weight: lighter;">
                {{ insurance.description }}
            </label>
        </div>

        <div class="col-md-2">
            <div class="form-group col-md-12">
                <label>
                    <input type="checkbox" {{ hasAdditive ? 'checked="checked"' }}/> &nbsp;
                    {{ insurance.name }}
                </label>
            </div>
        </div>

        <div class="form-group col-md-2 text-center">
            <label> Valor do Seguro </label>
            <h2> {{ hasAdditive ? hasAdditive.total : '--' }} </h2>
        </div>

    </div>

{% endfor %}

<script>
    // TODO: Esta view sera ajustada nas proximas tarefas
    {#var InsuranceHandler = {#}
        {#checker: $('#financial_insurance'),#}
        {#output: $('#safe_output'),#}
        {#apply: function(){#}
            {#var insure = this.checker.is(':checked')?1:0;#}
            {#$.post('{{ path('financial_insure',{id:project.id}) }}',{insure:insure}, function(response){#}
                {#var project = response.project;#}
                {#InsuranceHandler.output.html(numeral(project.insurance).format('$0,0.00'));#}
                {#Financial.onSaveInsurance();#}
            {#});#}
        {#},#}
        {#init: function(){#}
            {#this.checker.on('change', function(){#}
                {#InsuranceHandler.apply();#}
            {#});#}
        {#}#}
    {#};#}

    {#InsuranceHandler.init();#}

</script>
