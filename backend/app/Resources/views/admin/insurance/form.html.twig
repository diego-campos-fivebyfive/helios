<div class="col-md-12 animated fadeInRight">
    <div class="ibox flow-h">
        <div class="ibox-title flow-lg">
    {{ form_start(form, {attr:{id:'form_insurance', action: app.request.uri }}) }}

    <div class="row">
        <div class="form-group col-md-5">
            {{ form_widget(form.name,{attr:{class:'form-control', placeholder: 'Seguro'}}) }}
        </div>

        <div class="form-group col-md-2">
            {{ form_widget(form.type,{attr:{class:'form-control'}}) }}
        </div>

        <div class="form-group col-md-3">
            {{ form_widget(form.target,{attr:{class:'form-control'}}) }}
        </div>

        <div class="form-group col-md-2">
            {{ form_widget(form.value,{attr:{class:'form-control', placeholder: 'Valor do seguro'}}) }}
        </div>

        <div class="form-group col-md-8">
            {{ form_widget(form.description,{attr:{class:'form-control', placeholder: 'Descrição'}}) }}
        </div>

        <div class="form-group col-md-2 pull-right">
            <button type="submit" class="btn btn-primary btn-md btn-block ladda-button" data-style="zoom-in">
                <i class="fa fa-save"></i> Salvar
            </button>
        </div>
    </div>

    {{ form_end(form) }}
        </div>
    </div>
</div>

<script>

    var btnSubmit = $('button[type="submit"]');
    btnSubmit.ladda();

    $('#form_insurance').on('submit', function (event) {
        event.preventDefault();

        var form = this;

        btnSubmit.ladda('start');

        $.ajax({
            url: form.action,
            method: 'post',
            data: $(form).serialize(),
            complete: function (xhr) {
                btnSubmit.ladda('stop');
                if (200 == xhr.status)
                    Insurance.blockForm.html('');
            }
        });
    });

</script>
