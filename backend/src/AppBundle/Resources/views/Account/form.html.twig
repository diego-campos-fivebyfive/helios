{% extends view('layout') %}

{% block body %}

    <style>
        .col-md-12 {
            margin-top: 10px;
        }
    </style>

<div class="wrapper wrapper-content">
    <div class="panel panel-success">
        <div class="panel-heading">
            Edição da Conta: <label> {{ account.firstname }} </label>
        </div>
        <div class="panel-body">
            <div class="row">
                {{ form_start(form,{attr:{id:'form-pre-register'}}) }}


                {% if errors|length %}
                    <div class="alert alert-danger col-md-4 col-md-offset-4">
                        {% for error in errors %}
                            {{ error.message|trans }}
                        {% endfor %}
                    </div>
                {% endif %}

                <div class="col-md-12">
                    <div class="col-md-4">
                        {{ form_label(form.document, 'CNPJ *',{label_attr:{class:'pull-left'}}) }}
                        {{ form_widget(form.document,{attr:{class:'form-control', 'data-mask':'00.000.000/0000-00', 'placeholder':'CNPJ'}}) }}
                    </div>
                    <div class="col-md-4">
                        {{ form_label(form.extraDocument, 'Inscrição Estadual', {label_attr:{class:'pull-left'}}) }}
                        {{ form_widget(form.extraDocument,{attr:{class:'form-control', 'placeholder':'Inscrição Estadual'}}) }}
                    </div>
                    <div class="col-md-4">
                        {{ form_label(form.lastname, 'Razão Social *', {label_attr:{class:'pull-left'}}) }}
                        {{ form_widget(form.lastname,{attr:{class:'form-control', 'placeholder':'Razão Social'}}) }}
                    </div>
                </div>

                <div class="col-md-12">
                    <div class="col-md-4">
                        {{ form_label(form.firstname, 'Nome Fantasia *', {label_attr:{class:'pull-left'}}) }}
                        {{ form_widget(form.firstname,{attr:{class:'form-control', 'placeholder':'Nome Fantasia'}}) }}
                    </div>
                    <div class="col-md-4">
                        {{ form_label(form.email, 'E-mail *', {label_attr:{class:'pull-left'}}) }}
                        {{ form_widget(form.email,{attr:{class:'form-control', 'placeholder':'E-mail'}}) }}
                    </div>
                    <div class="col-md-4">
                        {{ form_label(form.phone, 'Telefone *', {label_attr:{class:'pull-left'}}) }}
                        {{ form_widget(form.phone,{attr:{class:'form-control', 'placeholder':'Telefone'}}) }}
                    </div>
                    {#<div class="col-md-4">
                        {{ form_label(form.members, 'Pessoa para Contato *') }}
                        {{ form_widget(form.members,{attr:{class:'form-control', 'placeholder':'Pessoa para Contato'}}) }}
                    </div>#}
                </div>
                <div class="col-md-12">
                    <div class="col-md-3">
                        {{ form_label(form.postcode, 'CEP *', {label_attr:{class:'pull-left'}}) }}
                        {{ form_widget(form.postcode,{attr:{class:'form-control', 'data-mask':'00000-000', 'placeholder':'CEP'}}) }}
                    </div>
                    <div class="col-md-3">
                        {{ form_label(form.state, 'Estado *', {label_attr:{class:'pull-left'}}) }}
                        {{ form_widget(form.state,{attr:{class:'form-control', 'placeholder':'Estado'}}) }}
                    </div>
                    <div class="col-md-3">
                        {{ form_label(form.city, 'Cidade *', {label_attr:{class:'pull-left'}}) }}
                        {{ form_widget(form.city,{attr:{class:'form-control', 'placeholder':'Cidade'}}) }}
                    </div>
                    <div class="col-md-3">
                        {{ form_label(form.district, 'Bairro *', {label_attr:{class:'pull-left'}}) }}
                        {{ form_widget(form.district,{attr:{class:'form-control', 'placeholder':'Bairro'}}) }}
                    </div>
                </div>

                <div class="col-md-12">
                    <div class="col-md-3">
                        {{ form_label(form.street, 'Logradouro *', {label_attr:{class:'pull-left'}}) }}
                        {{ form_widget(form.street,{attr:{class:'form-control', 'placeholder':'Logradouro'}}) }}
                    </div>
                    <div class="col-md-3">
                        {{ form_label(form.number, 'Número *', {label_attr:{class:'pull-left'}}) }}
                        {{ form_widget(form.number,{attr:{class:'form-control', 'placeholder':'Número'}}) }}
                    </div>
                    <div class="col-md-3">
                        {{ form_label(form.status, 'Status da Conta *') }}
                        {{ form_widget(form.status,{attr:{class:'form-control', 'placeholder':'Status'}}) }}
                    </div>
                    <div class="col-md-3">
                        {{ form_label(form.level, 'Nivel de Conta *') }}
                        {{ form_widget(form.level,{attr:{class:'form-control', 'placeholder':'Status'}}) }}
                    </div>

                </div>

                <div class="form-group col-md-4 col-md-offset-4" style="margin-top: 20px;">
                    <button class="btn btn-md btn-primary ladda-button btn-block" data-style="zoom-in"
                            id="btn-pre-submit">
                        <i class="fa fa-check"></i> Salvar Alterações
                    </button>
                </div>
        </div>
            {{ form_end(form) }}
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}

    <script>

        $(function () {
            $('.middle-box').removeClass('middle-box');
        });
        $('#pre_register_postcode').change(function () {
            $.ajax({
                url: '{{ path('utils_postcode') }}',
                method: 'post',
                data: {postcode: $('#pre_register_postcode').val()},
                complete: function (xhr) {
                    if (200 == xhr.status) {
                        $('#pre_register_state').val(xhr.responseJSON.uf);
                        $('#pre_register_city').val(xhr.responseJSON.cidade);
                        $('#pre_register_district').val(xhr.responseJSON.bairro);
                        $('#pre_register_street').val(xhr.responseJSON.logradouro);
                    }
                }
            });
        });

        $('#pre_register_phone').mask(function (val) {
            return val.replace(/\D/g, '').length === 11 ? '(00) 00000-0000' : '(00) 0000-00009';
        });

        $('#form-pre-register').on('submit', function(event){
            $('#btn-pre-submit').ladda();
            $('#btn-pre-submit').ladda('start');
        });

    </script>

{% endblock %}
